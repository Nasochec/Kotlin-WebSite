<!doctype html>
<html class="no-js" lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}{% endblock %}</title>
    <link rel="icon" href="/images/book.ico">
    <link rel="stylesheet" href="/css/foundation.css">
    <link rel="stylesheet" href="/css/app.css">
</head>
<body>
    <div class="grid-container">
        <div class="top-bar medium-6">
            <ul class="dropdown menu" data-dropdown-menu>
                <li class="menu-text">Самиздат</li>
                <li><a href="/">Главная страница</a></li>
                <li><a href="/authors">Список авторов</a></li>
                <li><a href="/books">Список книг</a></li>
                <li><a href="/statistics">Статистика</a></li>
            </ul>
        </div>
        <div class="medium-6 cell">
            {% block content %}{% endblock %}
        </div>
        <hr>
        <footer>Выполнил студент группы ИТ-31БО Гладков Артемий в качестве лабораторной работы в рамках курса "Программирование веб-приложений"</footer>
    </div>



    <script src="/js/vendor/jquery.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>

{# macros for selection from a list of objects #}
{% macro selectFromList(label,name,list,selectedId,haveNullValue = false) %}
<label>{{label}}</label>
<select name="{{name}}">
    {% for item in list %}
        <option value="{{item.id}}" {% if selectedId == item.id %} selected {% endif %}>{{item.name}}</option>
    {% endfor %}
    {% if haveNullValue %}
        <option value="" {% if selectedId is null%} selected {% endif %}>(нет)</option>
    {% endif %}
</select>
{% endmacro %}

{# macros for selection from a list of enum values #}
{% macro selectFromListEnum(label,name,list,selectedVal) %}
<label>{{label}}</label>
<select name="{{name}}">
    {% for item in list %}
    <option value="{{item.name}}" {% if selectedVal == item.name %} selected {% endif %}>{{item.string}}</option>
    {% endfor %}
</select>
{% endmacro %}

{# Макрос для отображенеия списка книг. Выдаёт стандартное сообщение об ошибке. #}
{% macro showBooksList(list)%}
{% if list is not empty %}
<table>
    <thead>
    <tr>
        <th width="200">Название книги</th>
        <th width="150">Рейтинг</th>
        <th width="150">Формат</th>
        <th width="150"></th>
    </tr>
    </thead>
    <tbody>
    {% for book in list %}
    <tr>
        <td>{{book.name}}</td>
        <td>{{book.rating.string}}</td>
        <td>{{book.format.string}}</td>
        <td><a href="/book/{{book.id}}">Подробнее</a></td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<div class="callout">
    <p>По запросу ничего не найдено, возможно вы перешли слишком большой номер страницы, либо по указанным параметрам фильтрации ничего не найдено.</p>
</div>
{% endif %}
{% endmacro %}


{% macro showErrors(formErrors,errors = null) %}
    {% if formErrors is not empty or errors is not empty %}
    <div>
        <div class="alert callout" data-closable>
            {% if formErrors is not empty %}
                <h3>Пожалуйста, заполните следующие поля:</h3>
                {% for error in formErrors %}
                    <p>
                            {{error.toString()}}
                    </p>
                {% endfor %}
            {% endif %}
            {% if errors is not empty %}
                {% for error in errors %}
                    <p>
                        {{error}}
                    </p>
                {% endfor %}
            {% endif %}
            <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </div>
    {% endif %}
{% endmacro %}
